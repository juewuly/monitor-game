!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.MonitorGame=t():e.MonitorGame=t()}(window,(function(){return function(e){var t={};function n(a){if(t[a])return t[a].exports;var r=t[a]={i:a,l:!1,exports:{}};return e[a].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(a,r,function(t){return e[t]}.bind(null,r));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=7)}([function(e,t){e.exports=function(e){return e&&e.__esModule?e:{"default":e}}},function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}e.exports=function(e,t,a){return t&&n(e.prototype,t),a&&n(e,a),e}},function(e,t,n){"use strict";var a=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=void 0;var r=a(n(12)),u=a(n(1)),i=a(n(2)),o=a(n(13)),c=a(n(14)),f=function(){function e(){(0,u["default"])(this,e),this._baseData={}}return(0,i["default"])(e,null,[{key:"Instance",get:function(){return this._instance||(this._instance=new e),this._instance}}]),(0,i["default"])(e,[{key:"setBaseData",value:function(e){var t=(0,r["default"])(e);"function"!==t&&"object"!==t&&console.error("参数类型错误，应该对象或方法。"),this._baseData=e}},{key:"getBaseData",value:function(){return"function"==typeof this._baseData?this._baseData():this._baseData}},{key:"getCurrentTime",value:function(){var e=new Date,t=e.getFullYear(),n=e.getMonth()+1,a=e.getDate(),r=e.getHours(),u=e.getMinutes(),i=e.getSeconds();return t+"-"+(n<10?"0"+n:n)+"-"+(a<10?"0"+a:a)+" "+(r<10?"0"+r:r)+":"+(u<10?"0"+u:u)+":"+(i<10?"0"+i:i)}},{key:"getClickData",value:function(e){return e=o["default"].fix(e),c["default"].getMetricData(e.target)}},{key:"getKeydownData",value:function(e){return 13==(e=o["default"].fix(e)).keyCode&&c["default"].getMetricData(e.target)}}]),e}().Instance;t["default"]=f},function(e,t,n){"use strict";var a=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=void 0;var r=a(n(1)),u=a(n(2)),i=function(){function e(){(0,r["default"])(this,e),this._metricAttributeName="data-wk",this._metricParamName="metric"}return(0,u["default"])(e,null,[{key:"Instance",get:function(){return this._instance||(this._instance=new e),this._instance}}]),(0,u["default"])(e,[{key:"setMetricAttributeName",value:function(e){this._metricAttributeName=e}},{key:"getMetricAttributeName",value:function(){return this._metricAttributeName}},{key:"setMetricParamName",value:function(e){this._metricParamName=e}},{key:"getMetricParamName",value:function(){return this._metricParamName}}]),e}().Instance;t["default"]=i},function(e,t,n){"use strict";var a=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=void 0;var r=a(n(1)),u=a(n(2)),i=a(n(6)),o=function(){function e(){(0,r["default"])(this,e),this._urlObj={}}return(0,u["default"])(e,null,[{key:"Instance",get:function(){return this._instance||(this._instance=new e),this._instance}}]),(0,u["default"])(e,[{key:"getUrl",value:function(e){return!!i["default"][e]&&this._urlObj[e]}},{key:"configUrl",value:function(e){this._urlObj=e}}]),e}().Instance;t["default"]=o},function(e,t,n){"use strict";var a=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=void 0;var r=a(n(1)),u=a(n(2)),i=function(){function e(){(0,r["default"])(this,e)}return(0,u["default"])(e,[{key:"click",get:function(){return"click"}},{key:"clickHeatMap",get:function(){return"clickHeatMap"}}],[{key:"Instance",get:function(){return this._instance||(this._instance=new e),this._instance}}]),e}().Instance;t["default"]=i},function(e,t,n){n(8),e.exports=n(9)},function(e,t){var n=Object.defineProperty;n&&function(){var e={};try{for(var t in n(e,"x",{enumerable:!1,value:e}),e)return!1;return e.x===e}catch(a){return!1}}()||(Object.defineProperty=function(e,t,a){if(n&&1==e.nodeType)return n(e,t,a);e[t]=a.value||a.get&&a.get()})},function(e,t,n){"use strict";var a=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=void 0;var r=a(n(10)),u=a(n(3)),i={version:r["default"].version,getClickAndKeydown:r["default"].getClickAndKeydown,getClickHeatmap:r["default"].getClickHeatmap,send:r["default"].send,setBaseLogData:r["default"].setBaseLogData,getCurrentTime:u["default"].getCurrentTime,setMetricAttributeName:r["default"].setMetricAttributeName,setMetricParamName:r["default"].setMetricParamName,configUrl:r["default"].configUrl};t["default"]=i},function(e,t,n){"use strict";var a=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=void 0;var r=a(n(11)),u=a(n(1)),i=a(n(2)),o=a(n(3)),c=a(n(4)),f=a(n(5)),s=a(n(6)),l=a(n(15)),d=a(n(18)),v=function(){function e(){(0,u["default"])(this,e)}return(0,i["default"])(e,null,[{key:"Instance",get:function(){return this._instance||(this._instance=new e),this._instance}}]),(0,i["default"])(e,[{key:"getClickAndKeydown",value:function(){return d["default"].on(document,"mousedown",(function(e){var t=o["default"].getClickData(e);t&&l["default"].send((0,r["default"])({},c["default"].getMetricParamName(),t),s["default"].click)})),d["default"].on(document,"keydown",(function(e){var t=o["default"].getKeydownData(e);t&&l["default"].send((0,r["default"])({},c["default"].getMetricParamName(),t),s["default"].click)})),this}},{key:"getClickHeatmap",value:function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:2,t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:5,n=[],a=0,r=function u(r){if(clearTimeout(a),r||n.length>e)return l["default"].send({positions:n.join(","),screenSize:"".concat(screen.width,"x").concat(screen.height)},s["default"].clickHeatMap),void(n=[]);a=setTimeout((function(){u(!0)}),60*t*1e3)};return d["default"].on(document,"mousedown",(function(e){var t=e.pageX+"."+e.pageY;n.push(t),r()})),this}},{key:"send",value:function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:s["default"].click;return l["default"].send(e,t),this}},{key:"setBaseLogData",value:function(e){return o["default"].setBaseData(e),this}},{key:"setMetricAttributeName",value:function(e){return c["default"].setMetricAttributeName(e),this}},{key:"setMetricParamName",value:function(e){return c["default"].setMetricParamName(e),this}},{key:"configUrl",value:function(e){return f["default"].configUrl(e),this}},{key:"version",get:function(){return"v1.0.0"}}]),e}().Instance;t["default"]=v},function(e,t){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},function(e,t){function n(t){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?e.exports=n=function(e){return typeof e}:e.exports=n=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(t)}e.exports=n},function(e,t,n){"use strict";var a=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=void 0;var r=a(n(1)),u=a(n(2)),i=function(){function e(){(0,r["default"])(this,e)}return(0,u["default"])(e,[{key:"fix",value:function(e){if(!("target"in e)){var t=e.srcElement;t&&3==t.nodeType&&(t=t.parentNode),e.target=t}return e}}],[{key:"Instance",get:function(){return this._instance||(this._instance=new e),this._instance}}]),e}().Instance;t["default"]=i},function(e,t,n){"use strict";var a=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=void 0;var r=a(n(1)),u=a(n(2)),i=a(n(4)),o=function(){function e(){(0,r["default"])(this,e),this._maxLength=100}return(0,u["default"])(e,null,[{key:"Instance",get:function(){return this._instance||(this._instance=new e),this._instance}}]),(0,u["default"])(e,[{key:"getMetricData",value:function(e){for(var t=i["default"].getMetricAttributeName(),n="";e;){if(e.attributes&&(t in e.attributes||"data-".concat(t)in e.attributes))return(n=e.getAttribute(t)||e.getAttribute("data-".concat(t))).substr(0,this._maxLength);e=e.parentNode}return n}}]),e}().Instance;t["default"]=o},function(e,t,n){"use strict";var a=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=void 0;var r=a(n(16)),u=a(n(1)),i=a(n(2)),o=a(n(3)),c=a(n(5)),f=a(n(17)),s=function(){function e(){(0,u["default"])(this,e),this.lastLogParams="",window.__monitor_game_imgs={}}return(0,i["default"])(e,null,[{key:"Instance",get:function(){return this._instance||(this._instance=new e),this._instance}}]),(0,i["default"])(e,[{key:"send",value:function(e,t){if(this.validateParams(e,t)){var n=this.extendParams(e),a=this.generateUrl(n,t);this.sendLog(a)}}},{key:"generateUrl",value:function(e,t){var n=c["default"].getUrl(t),a=f["default"].encodeParams(e);a+="&t="+ +new Date;var r=n.indexOf("?")>-1?"&":"?";return"".concat(n).concat(r).concat(a)}},{key:"extendParams",value:function(e){var t=o["default"].getBaseData();return(0,r["default"])(t,e)}},{key:"validateParams",value:function(e,t){var n=this,a=c["default"].getUrl(t),r=f["default"].encodeParams(e);return a?"Object"!==Object.prototype.toString.call(e).slice(8,-1)?(console.error("参数类型异常，应传Object类型！"),!1):r!==this.lastLogParams&&(this.lastLogParams=r,setTimeout((function(){n.lastLogParams=""}),100),!0):(console.error("".concat(t,"的api url未配置！")),!1)}},{key:"sendLog",value:function(e){var t="log_"+ +new Date,n=window.__monitor_game_imgs[t]=new Image;n.onload=n.onerror=function(){window.__monitor_game_imgs&&window.__monitor_game_imgs[t]&&(window.__monitor_game_imgs[t]=null,delete window.__monitor_game_imgs[t])},n.src=e}}]),e}().Instance;t["default"]=s},function(e,t){function n(){return e.exports=n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},n.apply(this,arguments)}e.exports=n},function(e,t,n){"use strict";var a=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=void 0;var r=a(n(1)),u=a(n(2)),i=function(){function e(){(0,r["default"])(this,e)}return(0,u["default"])(e,[{key:"encodeParams",value:function(e){var t=[];for(var n in e)null!=e[n]&&t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t.join("&")}}],[{key:"Instance",get:function(){return this._instance||(this._instance=new e),this._instance}}]),e}().Instance;t["default"]=i},function(e,t,n){"use strict";var a=n(0);Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=void 0;var r=a(n(1)),u=a(n(2)),i=function(){function e(){(0,r["default"])(this,e)}return(0,u["default"])(e,[{key:"on",value:function(e,t,n){e&&(e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent("on"+t,n))}},{key:"parentNode",value:function(e,t){var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:5;for(t=t.toUpperCase();e&&n-- >0;){if(e.tagName===t)return e;e=e.parentNode}return null}}],[{key:"Instance",get:function(){return this._instance||(this._instance=new e),this._instance}}]),e}().Instance;t["default"]=i}])["default"]}));